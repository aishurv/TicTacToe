@page "/game"
<h3>Tic Tac Toe</h3>

<div class="board">
    @for (int row = 0; row < 3; row++)
    {
        <div class="row">
            @for (int col = 0; col < 3; col++)
            {
                <button class="cell" @onclick="(() => MakeMove(row, col))">
                    @board[row, col]
                </button>
            }
        </div>
    }
</div>

<div class="status">
    @if (winner != null)
    {
        <p>@winner Wins!</p>
    }
    else if (IsBoardFull())
    {
        <p>It's a Draw!</p>
    }
    else
    {
        <p>Current Turn: @currentPlayer</p>
    }
</div>

<button class="reset" @onclick="ResetGame">Reset Game</button>

@code {
    private string[,] board = new string[3, 3];
    private string currentPlayer = "X";
    private string? winner;

    private void MakeMove(int row, int col)
    {
        if (board[row, col] == null && winner == null)
        {
            board[row, col] = currentPlayer;
            if (CheckWinner())
            {
                winner = currentPlayer;
            }
            else
            {
                currentPlayer = currentPlayer == "X" ? "O" : "X";
            }
        }
    }

    private bool CheckWinner()
    {
        // Check rows and columns
        for (int i = 0; i < 3; i++)
        {
            if (board[i, 0] != null && board[i, 0] == board[i, 1] && board[i, 1] == board[i, 2])
                return true;
            if (board[0, i] != null && board[0, i] == board[1, i] && board[1, i] == board[2, i])
                return true;
        }
        // Check diagonals
        if (board[0, 0] != null && board[0, 0] == board[1, 1] && board[1, 1] == board[2, 2])
            return true;
        if (board[0, 2] != null && board[0, 2] == board[1, 1] && board[1, 1] == board[2, 0])
            return true;

        return false;
    }

    private bool IsBoardFull()
    {
        return board.Cast<string>().All(cell => cell != null);
    }

    private void ResetGame()
    {
        board = new string[3, 3];
        currentPlayer = "X";
        winner = null;
    }
}

